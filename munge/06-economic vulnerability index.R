# Example preprocessing script.
source("./lib/funcs.R")
filename <- "./data/sfr model data/economic vulnerability index.xlsx"
evi <- read_excel(filename, "remoteness")
evi <- evi %>% dplyr::rename(iso3c = country) %>% dplyr::select(-iso_3)
evi <- evi %>% gather(year, value, -iso3c)
evi$year <- as.numeric(gsub("remot_index", "", evi$year))
evi <- evi %>% dplyr::filter(value > 0)
evi$variablename <- "Remoteness"
evi <- evi[, c("iso3c", "variablename", "year", "value")]
# add zeros for OECD countries
oecd <- read_excel("./data/additional data/OECD countries.xlsx")
names(oecd)[1] <- "LOCATION"
oecd <- (country.code.name(unique(oecd$LOCATION)))
oecd <- setdiff(oecd, country.code.name(evi$iso3c))
oecd <- data.frame(iso3c = country.code.name(oecd), variablename = evi$variablename[1], year = max(evi$year), 
    value = 0)
evi <- rbind(evi, oecd)
raw.data$evi <- evi
rmExcept("raw.data") 
